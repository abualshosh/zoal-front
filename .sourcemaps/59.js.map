{"version":3,"sources":["../../src/pages/chat/chats.module.ts","../../src/pages/chat/chats.ts"],"names":[],"mappings":"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","file":"59.js","sourcesContent":["// import { SharedModule } from '../../../app/shared.module';\nimport { ChatsPage } from './chats';\nimport { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { TranslateModule } from '@ngx-translate/core';\n\n@NgModule({\n  declarations: [\n    ChatsPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(ChatsPage),\n    TranslateModule.forChild()\n  //  SharedModule\n  ],\n  exports: [\n    ChatsPage\n  ]\n})\n\nexport class ChatsPageModule { }\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/chat/chats.module.ts","import { Component } from '@angular/core';\nimport { NavController, IonicPage,ModalController } from 'ionic-angular';\nimport { SQLite ,SQLiteObject  } from '@ionic-native/sqlite';\nimport { Api } from '../../providers/providers'\nimport { Events } from 'ionic-angular';\n\n@IonicPage()\n@Component({\n  templateUrl: 'chats.html',\n})\n\n\nexport class ChatsPage {\n  public messageForm: any;\n  chats = [];\n  messages:any=[];\nconstructor(public modalCtrl: ModalController,public events: Events,public api:Api,public sqlite:SQLite,public navCtrl: NavController) {\n  \n  this.chats.push({\n    imageUrl: this.api.url+'/profileimage/'+\"249922190200\",\n    title: \"249922190200\",\n    lastMessage: \"s\",\n    timestamp:\"\"\n  });\n    this.events.subscribe('sending', (msgData) => {\n      var found=false;\n      for(var i = 0; i < this.chats.length; i++)\n      {\n         if(this.chats[i].title==msgData.username){\n           found=true;\n          this.chats[i].lastMessage=msgData.text;\n         }\n      }\n      if(!found){\n        this.chats.push({\n          imageUrl: this.api.url+'/profileimage/'+msgData.username,\n          title: msgData.username,\n          lastMessage: msgData.text,\n          timestamp: msgData.date\n        });\n      }\n    });\n    this.events.subscribe('message', (greeting) => {\n    var add=false;\n      for(var i = 0; i < this.chats.length; i++)\n      {\n         if(this.chats[i].title==greeting.sender){\n          this.chats[i].lastMessage=greeting.message;\n          this.chats[i].timestamp=greeting.msgData;\n          add=true; \n        }\n      }\n\n      if(!add){\n        this.chats.push({\n          imageUrl: this.api.url+'/profileimage/'+greeting.sender,\n          title: greeting.sender,\n          lastMessage: greeting.message,\n          timestamp: greeting.msgoy\n       \n        });\n      }\n\n    });\n\n\n\n    this.sqlite.create({\n      name: localStorage.getItem('username'),\n      location: 'default'\n    })\n      .then((db: SQLiteObject) => {\n\n    db.executeSql(\"SELECT * FROM chats\", []).then(data => {\n       // this.items = [];\n\n        if(data.rows.length > 0) {\n            for(var i = 0; i < data.rows.length; i++)\n            {\n\n            this.chats.push({\n                imageUrl: this.api.url+'/profileimage/'+data.rows.item(i).otherUser,\n                title: data.rows.item(i).otherUser,\n                lastMessage: data.rows.item(i).msg,\n                timestamp: data.rows.item(i).msgDate\n              });\n\n       //         this.items.push(data.rows.item(i));\n            }\n        }\n    }, (e) => {\n\n\n        console.log(\"Errot: \" + JSON.stringify(e));\n    });\n\n      })\n      .catch(e => console.log(e));\n\n\n  }\n\nselectNew(){\n  let profileModal = this.modalCtrl.create('SelectUserPage');\n   profileModal.onDidDismiss(data => {\n\nif (data){\n \nthis.viewMessages({\"title\":data});\n          }\n   });\n   profileModal.present();\n\n\n\n\n}\n  viewMessages(chat) {\n    this.messages=[];\n    this.sqlite.create({\n      name: localStorage.getItem('username'),\n      location: 'default'\n    })\n      .then((db: SQLiteObject) => {\n    db.executeSql(\"SELECT * FROM messages where chatid=? order by id DESC limit ? \", [chat.title,10]).then(data => {\n    if(data.rows.length > 0) {\n      for(var i = data.rows.length-1; i >= 0; i--)\n      {\n\n        this.messages.push({\n          toId: data.rows.item(i).otherUser,\n          _id: 6,\n          date: data.rows.item(i).msgDate,\n          userId: data.rows.item(i).otherUser,\n          username: data.rows.item(i).otherUser,\n          pic: this.api.url+'/profileimage/'+data.rows.item(i).otherUser,\n          text: data.rows.item(i).msg    });\n\n      }\n\n    }\n  this.navCtrl.push('MessagesPage', { otherUser : chat.title, msg :this.messages });\n    }, (e) => {\n\n\n    console.log(\"Errot: \" + JSON.stringify(e));\n    });\n  })\n  .catch(e => \n    this.navCtrl.push('MessagesPage', { otherUser : chat.title, msg :this.messages })\n  );\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/chat/chats.ts"],"sourceRoot":""}